<section th:fragment="section" xmlns:th="http://www.thymeleaf.org" th:replace="layout :: section">
    <h1>Karte – Offene Netze</h1>
    <div id="map" style="height: 480px;"></div>
    <script th:inline="javascript">
        /*<![CDATA[*/
        const data = JSON.parse(/*[[${netsJson}]]*/ '[]');
        const map = L.map('map').setView([0, 0], 2);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18 }).addTo(map);
        data.forEach(n => {
            const m = L.marker([n.latitude, n.longitude]).addTo(map);
            m.bindPopup(`Netz #${n.id}<br/>Größe: ${n.sizeEstimate}<br/>Status: ${n.status}`);
        });
        /*]]>*/
    </script>
</section>